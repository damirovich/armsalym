<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ARMzalogApp.Views.ZavkrPages.CreateLoanZarp"
             Title="Зарплатная заявка">
    <Grid>

        <ScrollView Orientation="Both">
            <VerticalStackLayout Padding="10" Spacing="10 ">

                <!-- № -->
                <HorizontalStackLayout Spacing="10">
                    <Label Text="Заявление №:" VerticalOptions="Center"/>
                    <Entry Text="{Binding SelectedKlient.ZvNom}" Keyboard="Numeric" WidthRequest="120"/>
                </HorizontalStackLayout>
                <VerticalStackLayout Spacing="3">
                    <!-- Сумма + список -->
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Сумма:" VerticalOptions="Center"/>
                        <Entry Text="{Binding SelectedKlient.ZvSum}" Keyboard="Numeric" WidthRequest="120" Margin="30,0,0,0"/>
                        <Label Text="Валюта:" VerticalOptions="Center" Margin="30,0,0,0"/>
                        <Picker WidthRequest="150" ItemsSource="{Binding CurrencyList}"
                        ItemDisplayBinding="{Binding Name}" SelectedItem="{Binding SelectedCurrency, Mode=TwoWay}"/>
                    </HorizontalStackLayout>

                    <!-- Срок в мес + списки -->
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Срок в мес:" VerticalOptions="Center"/>
                        <Entry Text="{Binding SelectedKlient.ZvSrok}" Keyboard="Numeric" WidthRequest="120"/>
                        <Label Text="Вид кредита:" VerticalOptions="Center"/>
                        <Picker  WidthRequest="150" VerticalOptions="Center" HorizontalOptions="Fill" ItemsSource="{Binding LoanTypeList}" 
                        ItemDisplayBinding="{Binding Name}" SelectedItem="{Binding SelectedLoanType, Mode=TwoWay}"/>

                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Суб.продукт:" VerticalOptions="Center" Margin="210,0,0,0"/>
                        <Picker WidthRequest="150" VerticalOptions="Center" HorizontalOptions="Fill" ItemsSource="{Binding SubProductList}" 
                        ItemDisplayBinding="{Binding SNam}" SelectedItem="{Binding SelectedSubProduct, Mode=TwoWay}"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <!-- Цель кредита -->
                <HorizontalStackLayout Spacing="10">
                    <Label Text="Цель кредита:" VerticalOptions="Center"/>
                    <Picker WidthRequest="250" VerticalOptions="Center" HorizontalOptions="Fill" ItemsSource="{Binding PurposesList}" 
                        ItemDisplayBinding="{Binding SNam}" SelectedItem="{Binding SelectedPurpose, Mode=TwoWay}"/>
                </HorizontalStackLayout>

                <HorizontalStackLayout Spacing="10">
                    <Label Text="Клиент:" VerticalOptions="Center"/>
                    <Entry x:Name="clientEntry" Placeholder="Введите ФИО клиента" TextColor="{DynamicResource PrimaryTextColor}" PlaceholderColor="Grey" WidthRequest="200"/>
                    <Button Text="Обновить" Clicked="OnSaveNumberClicked" BackgroundColor="#5BCCEB" TextColor="Black"/>
                </HorizontalStackLayout>

                <!-- Паспортные данные -->
                <VerticalStackLayout Spacing="3">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Документ:" VerticalOptions="Center"/>
                        <Entry WidthRequest="120" Text="{Binding SelectedKlient.ZvDok}"/>
                        <Label Text="Серия:" VerticalOptions="Center"/>
                        <Entry WidthRequest="120" Text="{Binding SelectedKlient.ZvSrdok}"/>
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="20">
                        <Label Text="№:" VerticalOptions="Center"/>
                        <Entry WidthRequest="120" Text="{Binding SelectedKlient.ZvNdok}"/>
                        <Label Text="Дата выд.:" VerticalOptions="Center" Margin="30,0,0,0"/>
                        <DatePicker Date="{Binding SelectedKlient.ZvDatevp}" Format="dd.MM.yyyy" HorizontalOptions="Start" WidthRequest="200"/>
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Орган выд.:" VerticalOptions="Center"/>
                        <Entry WidthRequest="120"  Text="{Binding SelectedKlient.ZvMvd}" />
                        <Label Text="Годен до:" VerticalOptions="Center" Margin="4,0,0,0"/>
                        <DatePicker Date="{Binding SelectedKlient.ZvDokend}" Format="dd.MM.yyyy" HorizontalOptions="Start" WidthRequest="200"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <VerticalStackLayout Spacing="3">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Общий стаж работы:" VerticalOptions="Center"/>
                        <Entry WidthRequest="200" Text="{Binding SelectedKlient.BvRabStaj}" />
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="ИНН:  " VerticalOptions="Center"/>
                        <Entry WidthRequest="300" Text="{Binding SelectedKlient.ZvInn}" />
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Место работы и должность" VerticalOptions="Center"/>
                        <Entry WidthRequest="260" Text="{Binding SelectedKlient.Doljnoct}" />
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Место факт проживания:" VerticalOptions="Center"/>
                        <Entry WidthRequest="334" Text="{Binding SelectedKlient.FaktAdres}" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <HorizontalStackLayout Spacing="10">
                    <Label Text="III. Информация о членах семьи:" TextColor="Red" FontAttributes="Bold"/>
                </HorizontalStackLayout>

                <!-- Супруга -->
                <VerticalStackLayout Spacing="3">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Семейное п-е:" VerticalOptions="Center"/>
                        <Picker WidthRequest="250" ItemsSource="{Binding FamilyStatusList}" ItemDisplayBinding="{Binding Name}" SelectedItem="{Binding SelectedFamilyStatus}"/>
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="ФИО супруга(и):" VerticalOptions="Center"/>
                        <Entry WidthRequest="340" Text="{Binding SelectedKlient.FioCupr}" />
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Место раб." VerticalOptions="Center"/>
                        <Entry WidthRequest="370" Text="{Binding SelectedKlient.RabCupr}" />
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="и должность супруга:" VerticalOptions="Center"/>
                        <Entry WidthRequest="304" Text="{Binding SelectedKlient.DoljCup}" />
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="10">
                        <Label Text="№ тел.супруга:" VerticalOptions="Center"/>
                        <Entry WidthRequest="250" Text="{Binding SelectedKlient.BvTelefSupr}" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <!-- Кнопки -->


                <BoxView HeightRequest="1" BackgroundColor="Red" HorizontalOptions="Fill"/>

                <HorizontalStackLayout Spacing="10">
                    <Button Text="Сохранить" Clicked="OnSaveButtonClicked" BackgroundColor="Green" TextColor="White"/>
                    <Button Text="Выход" Clicked="OnBackButtonClicked" BackgroundColor="Black" TextColor="White"/>
                </HorizontalStackLayout>

            </VerticalStackLayout>
        </ScrollView>
        <ActivityIndicator IsVisible="{Binding IsLoading}"
                      IsRunning="{Binding IsLoading}"
                      Color="Blue"
                      HeightRequest="60"
                      WidthRequest="60"
                      HorizontalOptions="Center"
                      VerticalOptions="Center"/>
    </Grid>
</ContentPage>